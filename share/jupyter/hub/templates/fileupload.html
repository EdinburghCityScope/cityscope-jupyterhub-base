{% extends "page.html" %}

{% block main %}

<div class="container">


    {% if messages %}
    <div class="panel panel-default">

            <div class="{{message_class}}" style="padding:5px;">
                <p><strong>{% if successful %}Success{% else%}Error{% endif %}</strong></p>
                <ul>
                  {% for message in messages %}
                      <li>{{message}}</li>
                  {% endfor %}
                </ul>
            </div>

    </div>
    <div class="clearfix">&nbsp;</div>
    {% endif %}


<div class="panel panel-default">
    <div class="panel-heading"><h3>upload a dataset</h3></div>
    <div class="panel-body">

        <p>You can contribute to Edinburgh CityScope by uploading your own dataset.
        At the moment we accept <abbr title="Comma Separated Value">csv</abbr> files up to a maximum of 50mb</p>
        <form enctype="multipart/form-data" action="{{base_url}}add-dataset" method="post">
            <div class="form-group {{form_class}}"  id="fileUploadDiv">
			        <label class="control-label" for="filearg">Select a <abbr title="Comma Separated Value">csv</abbr> file to upload</label>
			        <input type="file" accept=".csv,text/plain" name="filearg" id="fileInput"/>
                    <span id="errorBlock" class="help-block">
                        {% if error_message %}
                            <ul>
                              {% for errMsg in error_message %}
                                  <li>{{errMsg}}</li>
                              {% endfor %}
                            </ul>
                        {% endif %}
                    </span>
            </div>
            <a href="{{base_url}}home" class="btn btn-default" role="button">Cancel</a>
            <input type="submit" class="btn btn-primary" id="DataUploadSubmit" value="upload dataset" />
        </form>

</div><!-- close panel body -->
</div><!-- close panel -->
    {% include "local_datasets.html" %}
</div>

{% endblock %}
{% block script %}
<script type="text/javascript">
require(["dataupload"]);
</script>
{% endblock %}
